---
page_title: "opnsense_firewall_nat Resource - terraform-provider-opnsense"
subcategory: Firewall
description: |-
  Network Address Translation (abbreviated to NAT) is a way to separate external and internal networks (WANs and LANs), and to share an external IP between clients on the internal network.
---

# opnsense_firewall_nat (Resource)

Network Address Translation (abbreviated to NAT) is a way to separate external and internal networks (WANs and LANs), and to share an external IP between clients on the internal network.

~> This resource requires the `os-firewall` plugin to be installed. It will *not* behave correctly if it is not installed.

## Example Usage

```terraform
resource "opnsense_firewall_nat" "example_one" {
  disable_nat = true

  interface = "wan"
  protocol  = "TCP"

  target = {
    ip = "wanip"
  }

  log         = true
  description = "Example"
}

resource "opnsense_firewall_nat" "example_two" {
  enabled = false

  interface = "wan"
  protocol  = "TCP"

  source = {
    net = "wan" # This is equiv. to WAN Net
  }

  destination = {
    net  = "10.8.0.1"
    port = 443
  }

  target = {
    ip = "wanip"
    port = 80
  }

  log         = true
  description = "Example"
}

resource "opnsense_firewall_nat" "example_three" {
  interface = "wan"
  protocol  = "TCP"

  source = {
    net = "192.168.0.0/16" # This is equiv. to WAN Net
    invert = true
  }

  destination = {
    net  = "examplealias"
    port = 443
  }

  target = {
    ip = "wanip"
    port = 443
  }

  description = "Example"
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `interface` (String) Choose on which interface(s) packets must come in to match this rule.
- `protocol` (String) Choose which IP protocol this rule should match.
- `target` (Attributes) (see [below for nested schema](#nestedatt--target))

### Optional

- `description` (String) Optional description here for your reference (not parsed).
- `destination` (Attributes) (see [below for nested schema](#nestedatt--destination))
- `disable_nat` (Boolean) Enabling this option will disable NAT for traffic matching this rule and stop processing Outbound NAT rules. Defaults to `false`.
- `enabled` (Boolean) Enable this firewall NAT rule. Defaults to `true`.
- `ip_protocol` (String) Select the Internet Protocol version this rule applies to. Available values: `inet`, `inet6`. Defaults to `inet`.
- `log` (Boolean) Log packets that are handled by this rule. Defaults to `false`.
- `sequence` (Number) Specify the order of this NAT rule. Defaults to `1`.
- `source` (Attributes) (see [below for nested schema](#nestedatt--source))

### Read-Only

- `id` (String) UUID of the resource.

<a id="nestedatt--target"></a>
### Nested Schema for `target`

Required:

- `ip` (String) Specify the IP address or alias for the packets to be mapped to. For `<INT> address`, enter `<int>ip` (e.g. `lanip`).

Optional:

- `port` (Number) Destination port number or well known name (imap, imaps, http, https, ...), for ranges use a dash. Defaults to `-1`.


<a id="nestedatt--destination"></a>
### Nested Schema for `destination`

Optional:

- `invert` (Boolean) Use this option to invert the sense of the match. Defaults to `false`.
- `net` (String) Specify the IP address, CIDR or alias for the destination of the packet for this mapping. For `<INT> net`, enter `<int>` (e.g. `lan`). For `<INT> address`, enter `<int>ip` (e.g. `lanip`). Defaults to `any`.
- `port` (Number) Destination port number or well known name (imap, imaps, http, https, ...), for ranges use a dash. Defaults to `-1`.


<a id="nestedatt--source"></a>
### Nested Schema for `source`

Optional:

- `invert` (Boolean) Use this option to invert the sense of the match. Defaults to `false`.
- `net` (String) Specify the IP address, CIDR or alias for the source of the packet for this mapping. For `<INT> net`, enter `<int>` (e.g. `lan`). For `<INT> address`, enter `<int>ip` (e.g. `lanip`). Defaults to `any`.
- `port` (Number) Specify the source port for this rule. This is usually random and almost never equal to the destination port range (and should usually be `-1`). Defaults to `-1`.

