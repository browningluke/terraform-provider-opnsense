---
page_title: "opnsense_firewall_filter Resource - terraform-provider-opnsense"
subcategory: Firewall
description: |-
  Firewall filter rules can be used to restrict or allow traffic from and/or to specific networks as well as influence how traffic should be forwarded
---

# opnsense_firewall_filter (Resource)

Firewall filter rules can be used to restrict or allow traffic from and/or to specific networks as well as influence how traffic should be forwarded

~> This resource requires the `os-firewall` plugin to be installed. It will *not* behave correctly if it is not installed.

## Example Usage

```terraform
resource "opnsense_firewall_filter" "example_one" {
  enabled = false

  sequence = 1
  action   = "block"
  quick    = false

  interface = [
    "lan",
    "lo0",
  ]

  direction = "in"
  ip_protocol = "inet"
  protocol    = "UDP"

  source = {
    net    = "any"
    invert = true
  }

  destination = {
    net    = "examplealias"
    port   = "https"
  }

  log = false
  description = "example rule"
}

resource "opnsense_firewall_filter" "example_two" {
  action = "pass"
  interface = [
    "wan",
  ]

  direction = "in"
  protocol  = "TCP"

  source = {
    net = "wan" # This is equiv. to WAN Net
  }

  destination = {
    net  = "10.8.0.1"
    port = "443"
  }

  description = "example rule"
}

resource "opnsense_firewall_filter" "example_three" {
  action = "pass"
  interface = [
    "wan",
  ]

  direction = "out"
  protocol  = "TCP"

  source = {
    net = "192.168.0.0/16"
  }

  destination = {
    net  = "wanip" # This is equiv. to WAN Address
    port = "80-443"
  }

  description = "example rule"
  log         = true
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `action` (String) Choose what to do with packets that match the criteria specified below. Hint: the difference between block and reject is that with reject, a packet (TCP RST or ICMP port unreachable for UDP) is returned to the sender, whereas with block the packet is dropped silently. In either case, the original packet is discarded. Available values: `pass`, `block`, `reject`.
- `direction` (String) Direction of the traffic. The default policy is to filter inbound traffic, which sets the policy to the interface originally receiving the traffic. Available values: `in`, `out`.
- `interface` (Set of String) Choose on which interface(s) packets must come in to match this rule. Must specify at least 1.
- `protocol` (String) Choose which IP protocol this rule should match.

### Optional

- `description` (String) Optional description here for your reference (not parsed).
- `destination` (Attributes) (see [below for nested schema](#nestedatt--destination))
- `enabled` (Boolean) Enable this firewall filter rule. Defaults to `true`.
- `gateway` (String) Leave as `""` to use the system routing table. Or choose a gateway to utilize policy based routing. Defaults to `""`.
- `ip_protocol` (String) Select the Internet Protocol version this rule applies to. Available values: `inet`, `inet6`. Defaults to `inet`.
- `log` (Boolean) Log packets that are handled by this rule. Defaults to `false`.
- `quick` (Boolean) If a packet matches a rule specifying quick, then that rule is considered the last matching rule and the specified action is taken. When a rule does not have quick enabled, the last matching rule wins. Defaults to `true`.
- `sequence` (Number) Specify the order of this filter rule. Defaults to `1`.
- `source` (Attributes) (see [below for nested schema](#nestedatt--source))

### Read-Only

- `id` (String) UUID of the resource.

<a id="nestedatt--destination"></a>
### Nested Schema for `destination`

Optional:

- `invert` (Boolean) Use this option to invert the sense of the match. Defaults to `false`.
- `net` (String) Specify the IP address, CIDR or alias for the destination of the packet for this mapping. For `<INT> net`, enter `<int>` (e.g. `lan`). For `<INT> address`, enter `<int>ip` (e.g. `lanip`). Defaults to `any`.
- `port` (String) Destination port number, well known name (imap, imaps, http, https, ...) or alias name, for ranges use a dash. Defaults to `""`.


<a id="nestedatt--source"></a>
### Nested Schema for `source`

Optional:

- `invert` (Boolean) Use this option to invert the sense of the match. Defaults to `false`.
- `net` (String) Specify the IP address, CIDR or alias for the source of the packet for this mapping. For `<INT> net`, enter `<int>` (e.g. `lan`). For `<INT> address`, enter `<int>ip` (e.g. `lanip`). Defaults to `any`.
- `port` (String) Specify the source port for this rule. This is usually random and almost never equal to the destination port range (and should usually be `""`). Defaults to `""`.

## Import

In Terraform v1.5.0 and later, use an [`import` block](https://developer.hashicorp.com/terraform/language/import) to import opnsense_firewall_filter using the `id`. For example:

```terraform
import {
  to = opnsense_firewall_filter.example
  id = "<opnsense-resource-id>"
}
```

Using `terraform import`, import opnsense_firewall_filter using the `id`. For example:

```console
% terraform import opnsense_firewall_filter.example <opnsense-resource-id>
```